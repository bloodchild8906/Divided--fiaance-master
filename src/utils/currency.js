export const currencySymbols = {
  // Major Global Currencies
  USD: '$', // US Dollar
  EUR: '€', // Euro
  GBP: '£', // British Pound
  JPY: '¥', // Japanese Yen
  CHF: 'CHF', // Swiss Franc
  
  // Asia & Pacific
  CNY: '¥', // Chinese Yuan
  HKD: 'HK$', // Hong Kong Dollar
  TWD: 'NT$', // New Taiwan Dollar
  KRW: '₩', // South Korean Won
  SGD: 'S$', // Singapore Dollar
  INR: '₹', // Indian Rupee
  MYR: 'RM', // Malaysian Ringgit
  IDR: 'Rp', // Indonesian Rupiah
  PHP: '₱', // Philippine Peso
  THB: '฿', // Thai Baht
  VND: '₫', // Vietnamese Dong
  BDT: '৳', // Bangladeshi Taka
  PKR: '₨', // Pakistani Rupee
  NPR: '₨', // Nepalese Rupee
  LKR: '₨', // Sri Lankan Rupee
  MMK: 'K', // Myanmar Kyat
  KHR: '៛', // Cambodian Riel
  LAK: '₭', // Laotian Kip
  MNT: '₮', // Mongolian Tugrik
  BND: 'B$', // Brunei Dollar
  MVR: 'Rf', // Maldivian Rufiyaa
  BTN: 'Nu.', // Bhutanese Ngultrum
  WST: 'WS$', // Samoan Tala
  SBD: 'SI$', // Solomon Islands Dollar
  TOP: 'T$', // Tongan Paʻanga
  VUV: 'VT', // Vanuatu Vatu
  
  // Middle East
  AED: 'د.إ', // UAE Dirham
  SAR: '﷼', // Saudi Riyal
  QAR: 'ر.ق', // Qatari Riyal
  OMR: 'ر.ع.', // Omani Rial
  BHD: '.د.ب', // Bahraini Dinar
  KWD: 'د.ك', // Kuwaiti Dinar
  JOD: 'د.ا', // Jordanian Dinar
  ILS: '₪', // Israeli New Shekel
  IQD: 'ع.د', // Iraqi Dinar
  YER: '﷼', // Yemeni Rial
  SYP: 'LS', // Syrian Pound
  LBP: 'ل.ل.', // Lebanese Pound
  IRR: '﷼', // Iranian Rial
  
  // Africa
  ZAR: 'R', // South African Rand
  NGN: '₦', // Nigerian Naira
  EGP: 'E£', // Egyptian Pound
  GHS: '₵', // Ghanaian Cedi
  KES: 'KSh', // Kenyan Shilling
  UGX: 'USh', // Ugandan Shilling
  TZS: 'TSh', // Tanzanian Shilling
  RWF: 'FRw', // Rwandan Franc
  BIF: 'FBu', // Burundian Franc
  ETB: 'Br', // Ethiopian Birr
  MWK: 'MK', // Malawian Kwacha
  ZMW: 'ZK', // Zambian Kwacha
  BWP: 'P', // Botswana Pula
  NAD: 'N$', // Namibian Dollar
  MUR: '₨', // Mauritian Rupee
  MAD: 'د.م.', // Moroccan Dirham
  DZD: 'دج', // Algerian Dinar
  TND: 'د.ت', // Tunisian Dinar
  LYD: 'ل.د', // Libyan Dinar
  SDG: 'ج.س.', // Sudanese Pound
  SOS: 'Sh.So.', // Somali Shilling
  ERN: 'Nfk', // Eritrean Nakfa
  DJF: 'Fdj', // Djiboutian Franc
  CMF: 'FCFA', // Central African CFA Franc
  XOF: 'CFA', // West African CFA Franc
  GMD: 'D', // Gambian Dalasi
  GNF: 'FG', // Guinean Franc
  CVE: '$', // Cape Verdean Escudo
  SZL: 'E', // Swazi Lilangeni
  LSL: 'L', // Lesotho Loti
  MGA: 'Ar', // Malagasy Ariary
  SCR: '₨', // Seychellois Rupee
  STN: 'Db', // São Tomé and Príncipe Dobra
  
  // Americas
  CAD: 'C$', // Canadian Dollar
  MXN: '$', // Mexican Peso
  BRL: 'R$', // Brazilian Real
  ARS: '$', // Argentine Peso
  CLP: '$', // Chilean Peso
  COP: '$', // Colombian Peso
  PEN: 'S/', // Peruvian Sol
  UYU: '$U', // Uruguayan Peso
  PYG: '₲', // Paraguayan Guarani
  BOB: 'Bs.', // Bolivian Boliviano
  VES: 'Bs.', // Venezuelan Bolívar
  CRC: '₡', // Costa Rican Colón
  NIO: 'C$', // Nicaraguan Córdoba
  HNL: 'L', // Honduran Lempira
  GTQ: 'Q', // Guatemalan Quetzal
  PAB: 'B/.', // Panamanian Balboa
  DOP: 'RD$', // Dominican Peso
  HTG: 'G', // Haitian Gourde
  JMD: 'J$', // Jamaican Dollar
  TTD: 'TT$', // Trinidad and Tobago Dollar
  BBD: 'Bds$', // Barbadian Dollar
  XCD: 'EC$', // East Caribbean Dollar
  BSD: 'B$', // Bahamian Dollar
  KYD: 'CI$', // Cayman Islands Dollar
  BMD: 'BD$', // Bermudian Dollar
  BZD: 'BZ$', // Belize Dollar
  GYD: 'G$', // Guyanese Dollar
  SRD: '$', // Surinamese Dollar
  
  // Europe
  NOK: 'kr', // Norwegian Krone
  SEK: 'kr', // Swedish Krona
  DKK: 'kr', // Danish Krone
  ISK: 'kr', // Icelandic Króna
  PLN: 'zł', // Polish Złoty
  CZK: 'Kč', // Czech Koruna
  HUF: 'Ft', // Hungarian Forint
  RON: 'lei', // Romanian Leu
  BGN: 'лв', // Bulgarian Lev
  HRK: 'kn', // Croatian Kuna
  RSD: 'дин.', // Serbian Dinar
  ALL: 'L', // Albanian Lek
  MKD: 'ден', // Macedonian Denar
  BAM: 'KM', // Bosnia-Herzegovina Convertible Mark
  MDL: 'L', // Moldovan Leu
  
  // Former Soviet Union
  RUB: '₽', // Russian Ruble
  UAH: '₴', // Ukrainian Hryvnia
  BYN: 'Br', // Belarusian Ruble
  KZT: '₸', // Kazakhstani Tenge
  GEL: '₾', // Georgian Lari
  AZN: '₼', // Azerbaijani Manat
  AMD: '֏', // Armenian Dram
  UZS: 'som', // Uzbekistani Som
  TJS: 'ЅМ', // Tajikistani Somoni
  TMT: 'T', // Turkmenistani Manat
  KGS: 'с', // Kyrgystani Som
  
  // Oceania
  AUD: 'A$', // Australian Dollar
  NZD: 'NZ$', // New Zealand Dollar
  FJD: 'FJ$', // Fijian Dollar
  PGK: 'K', // Papua New Guinean Kina
  
  // Cryptocurrencies
  BTC: '₿', // Bitcoin
  ETH: 'Ξ', // Ethereum
  
  // Special Drawing Rights
  XDR: 'SDR', // IMF Special Drawing Rights
  
  // Precious Metals
  XAU: 'Au', // Gold
  XAG: 'Ag', // Silver
  XPT: 'Pt', // Platinum
  XPD: 'Pd',  // Palladium

  // Custom Currency placeholder
  CUSTOM: '¤' // Placeholder for custom currency
};

// Storage key for custom currencies
const CUSTOM_CURRENCIES_KEY = 'custom_currencies';

// Load custom currencies from localStorage
export const loadCustomCurrencies = () => {
  try {
    const stored = localStorage.getItem(CUSTOM_CURRENCIES_KEY);
    return stored ? JSON.parse(stored) : {};
  } catch (error) {
    console.error('Error loading custom currencies:', error);
    return {};
  }
};

// Save custom currencies to localStorage
export const saveCustomCurrencies = (currencies) => {
  try {
    localStorage.setItem(CUSTOM_CURRENCIES_KEY, JSON.stringify(currencies));
  } catch (error) {
    console.error('Error saving custom currencies:', error);
  }
};

// Add a new custom currency
export const addCustomCurrency = (code, symbol, name) => {
  const customCurrencies = loadCustomCurrencies();
  customCurrencies[code] = { symbol, name };
  saveCustomCurrencies(customCurrencies);
};

// Remove a custom currency
export const removeCustomCurrency = (code) => {
  const customCurrencies = loadCustomCurrencies();
  delete customCurrencies[code];
  saveCustomCurrencies(customCurrencies);
};

export const getCurrencySymbol = (currencyCode) => {
  return currencySymbols[currencyCode] || currencyCode;
};

export const fetchExchangeRates = async () => {
  try {
    const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
    const data = await response.json();
    return {
      rates: data.rates,
      currencies: Object.keys(data.rates),
      timestamp: data.time_last_updated,
    };
  } catch (error) {
    console.error('Error fetching exchange rates:', error);
    return {
      rates: {},
      currencies: Object.keys(currencySymbols),
      timestamp: null,
    };
  }
};

// Currency regions mapping
export const currencyRegions = {
  USD: ['US', 'USA'],
  EUR: ['EU', 'DE', 'FR', 'IT', 'ES', 'NL', 'BE', 'AT', 'GR', 'PT', 'IE', 'FI', 'SK', 'LV', 'LT', 'EE', 'SI', 'LU', 'MT', 'CY'],
  GBP: ['GB', 'UK'],
  CAD: ['CA', 'CAN'],
  AUD: ['AU', 'AUS'],
  NZD: ['NZ', 'NZL'],
  JPY: ['JP', 'JPN'],
  // Add more region mappings as needed
};

// src/currency.js
export async function getCurrencyByRegion(region) {
  const mockData = {
    US: { code: 'USD', name: 'US Dollar' },
    EU: { code: 'EUR', name: 'Euro' },
    GB: { code: 'GBP', name: 'British Pound' },
    ZA: { code: 'ZAR', name: 'South African Rand' }
  };
  await new Promise(res => setTimeout(res, 300));
  return mockData[region] || { code: 'USD', name: 'US Dollar' };
}

// Search currencies by code or name
export const searchCurrencies = (query = '') => {
  const normalizedQuery = query.toLowerCase().trim();
  const currencyNames = {
    // Major Global Currencies
    USD: 'United States Dollar',
    EUR: 'Euro',
    GBP: 'British Pound Sterling',
    JPY: 'Japanese Yen',
    CHF: 'Swiss Franc',
    
    // Asia & Pacific
    CNY: 'Chinese Yuan Renminbi',
    HKD: 'Hong Kong Dollar',
    TWD: 'New Taiwan Dollar',
    KRW: 'South Korean Won',
    SGD: 'Singapore Dollar',
    INR: 'Indian Rupee',
    MYR: 'Malaysian Ringgit',
    IDR: 'Indonesian Rupiah',
    PHP: 'Philippine Peso',
    THB: 'Thai Baht',
    VND: 'Vietnamese Dong',
    BDT: 'Bangladeshi Taka',
    PKR: 'Pakistani Rupee',
    NPR: 'Nepalese Rupee',
    LKR: 'Sri Lankan Rupee',
    MMK: 'Myanmar Kyat',
    KHR: 'Cambodian Riel',
    LAK: 'Laotian Kip',
    MNT: 'Mongolian Tugrik',
    BND: 'Brunei Dollar',
    MVR: 'Maldivian Rufiyaa',
    BTN: 'Bhutanese Ngultrum',
    WST: 'Samoan Tala',
    SBD: 'Solomon Islands Dollar',
    TOP: 'Tongan Paʻanga',
    VUV: 'Vanuatu Vatu',
    
    // Middle East
    AED: 'United Arab Emirates Dirham',
    SAR: 'Saudi Riyal',
    QAR: 'Qatari Riyal',
    OMR: 'Omani Rial',
    BHD: 'Bahraini Dinar',
    KWD: 'Kuwaiti Dinar',
    JOD: 'Jordanian Dinar',
    ILS: 'Israeli New Shekel',
    IQD: 'Iraqi Dinar',
    YER: 'Yemeni Rial',
    SYP: 'Syrian Pound',
    LBP: 'Lebanese Pound',
    IRR: 'Iranian Rial',
    
    // Africa
    ZAR: 'South African Rand',
    NGN: 'Nigerian Naira',
    EGP: 'Egyptian Pound',
    GHS: 'Ghanaian Cedi',
    KES: 'Kenyan Shilling',
    UGX: 'Ugandan Shilling',
    TZS: 'Tanzanian Shilling',
    RWF: 'Rwandan Franc',
    BIF: 'Burundian Franc',
    ETB: 'Ethiopian Birr',
    MWK: 'Malawian Kwacha',
    ZMW: 'Zambian Kwacha',
    BWP: 'Botswanan Pula',
    NAD: 'Namibian Dollar',
    MUR: 'Mauritian Rupee',
    MAD: 'Moroccan Dirham',
    DZD: 'Algerian Dinar',
    TND: 'Tunisian Dinar',
    LYD: 'Libyan Dinar',
    SDG: 'Sudanese Pound',
    SOS: 'Somali Shilling',
    ERN: 'Eritrean Nakfa',
    DJF: 'Djiboutian Franc',
    CMF: 'Central African CFA Franc',
    XOF: 'West African CFA Franc',
    GMD: 'Gambian Dalasi',
    GNF: 'Guinean Franc',
    CVE: 'Cape Verdean Escudo',
    SZL: 'Swazi Lilangeni',
    LSL: 'Lesotho Loti',
    MGA: 'Malagasy Ariary',
    SCR: 'Seychellois Rupee',
    STN: 'São Tomé and Príncipe Dobra',
    
    // Americas
    CAD: 'Canadian Dollar',
    MXN: 'Mexican Peso',
    BRL: 'Brazilian Real',
    ARS: 'Argentine Peso',
    CLP: 'Chilean Peso',
    COP: 'Colombian Peso',
    PEN: 'Peruvian Sol',
    UYU: 'Uruguayan Peso',
    PYG: 'Paraguayan Guarani',
    BOB: 'Bolivian Boliviano',
    VES: 'Venezuelan Bolívar',
    CRC: 'Costa Rican Colón',
    NIO: 'Nicaraguan Córdoba',
    HNL: 'Honduran Lempira',
    GTQ: 'Guatemalan Quetzal',
    PAB: 'Panamanian Balboa',
    DOP: 'Dominican Peso',
    HTG: 'Haitian Gourde',
    JMD: 'Jamaican Dollar',
    TTD: 'Trinidad and Tobago Dollar',
    BBD: 'Barbadian Dollar',
    XCD: 'East Caribbean Dollar',
    BSD: 'Bahamian Dollar',
    KYD: 'Cayman Islands Dollar',
    BMD: 'Bermudian Dollar',
    BZD: 'Belize Dollar',
    GYD: 'Guyanese Dollar',
    SRD: 'Surinamese Dollar',
    
    // Europe
    NOK: 'Norwegian Krone',
    SEK: 'Swedish Krona',
    DKK: 'Danish Krone',
    ISK: 'Icelandic Króna',
    PLN: 'Polish Złoty',
    CZK: 'Czech Koruna',
    HUF: 'Hungarian Forint',
    RON: 'Romanian Leu',
    BGN: 'Bulgarian Lev',
    HRK: 'Croatian Kuna',
    RSD: 'Serbian Dinar',
    ALL: 'Albanian Lek',
    MKD: 'Macedonian Denar',
    BAM: 'Bosnia-Herzegovina Convertible Mark',
    MDL: 'Moldovan Leu',
    
    // Former Soviet Union
    RUB: 'Russian Ruble',
    UAH: 'Ukrainian Hryvnia',
    BYN: 'Belarusian Ruble',
    KZT: 'Kazakhstani Tenge',
    GEL: 'Georgian Lari',
    AZN: 'Azerbaijani Manat',
    AMD: 'Armenian Dram',
    UZS: 'Uzbekistani Som',
    TJS: 'Tajikistani Somoni',
    TMT: 'Turkmenistani Manat',
    KGS: 'Kyrgystani Som',
    
    // Oceania
    AUD: 'Australian Dollar',
    NZD: 'New Zealand Dollar',
    FJD: 'Fijian Dollar',
    PGK: 'Papua New Guinean Kina',
    
    // Cryptocurrencies
    BTC: 'Bitcoin',
    ETH: 'Ethereum',
    
    // Special Drawing Rights
    XDR: 'IMF Special Drawing Rights',
    
    // Precious Metals
    XAU: 'Gold',
    XAG: 'Silver',
    XPT: 'Platinum',
    XPD: 'Palladium'
  };

  return Object.entries(currencySymbols)
    .filter(([code, symbol]) => {
      const name = currencyNames[code] || code;
      return code.toLowerCase().includes(normalizedQuery) ||
             name.toLowerCase().includes(normalizedQuery) ||
             symbol.toLowerCase().includes(normalizedQuery);
    })
    .map(([code, symbol]) => ({
      code,
      symbol,
      name: currencyNames[code] || code
    }));
};
